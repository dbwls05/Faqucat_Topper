<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HTML+CSS+JS 종합 기능</title>
  <style>
    /* CSS 기본 스타일링 */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      padding: 20px;
      min-height: 100vh;
    }
    
    /* Flexbox & Grid 레이아웃 */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
    }
    
    /* CSS 변수(커스텀 속성) */
    :root {
      --card-bg: rgba(255, 255, 255, 0.95);
      --shadow: 0 10px 30px rgba(0,0,0,0.2);
      --primary: #667eea;
    }
    
    .card {
      background: var(--card-bg);
      border-radius: 15px;
      padding: 20px;
      box-shadow: var(--shadow);
      /* CSS 애니메이션 */
      animation: fadeIn 0.5s ease-in;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    /* CSS Transitions */
    .card:hover {
      transform: translateY(-5px);
      transition: transform 0.3s ease;
    }
    
    h2 {
      color: var(--primary);
      margin-bottom: 15px;
      font-size: 1.3rem;
    }
    
    /* 폼 요소 스타일링 */
    input, textarea, select, button {
      width: 100%;
      padding: 10px;
      margin: 5px 0;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 14px;
    }
    
    button {
      background: var(--primary);
      color: white;
      border: none;
      cursor: pointer;
      font-weight: bold;
      /* CSS Transform */
      transition: all 0.3s;
    }
    
    button:hover {
      background: #5568d3;
      transform: scale(1.05);
    }
    
    /* Pseudo-classes & Pseudo-elements */
    button::before {
      content: '▶ ';
    }
    
    input:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }
    
    /* CSS 필터 효과 */
    .filter-demo {
      width: 100%;
      height: 100px;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100"><rect fill="%23667eea" width="100" height="100"/></svg>');
      filter: grayscale(0%);
      transition: filter 0.3s;
    }
    
    .filter-demo:hover {
      filter: grayscale(100%) blur(2px);
    }
    
    /* Flexbox 정렬 */
    .flex-demo {
      display: flex;
      justify-content: space-around;
      align-items: center;
      gap: 10px;
      margin: 10px 0;
    }
    
    .flex-item {
      background: var(--primary);
      color: white;
      padding: 10px;
      border-radius: 5px;
      flex: 1;
      text-align: center;
    }
    
    /* Media Query (반응형) */
    @media (max-width: 768px) {
      .container { grid-template-columns: 1fr; }
    }
    
    /* Canvas 스타일 */
    canvas {
      width: 100%;
      height: 200px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      cursor: crosshair;
    }
    
    /* CSS Grid 고급 */
    .grid-demo {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 5px;
      margin: 10px 0;
    }
    
    .grid-item {
      background: var(--primary);
      color: white;
      padding: 15px;
      text-align: center;
      border-radius: 5px;
    }
    
    /* 리스트 스타일 */
    #todoList {
      list-style: none;
      padding: 0;
    }
    
    #todoList li {
      background: #f5f5f5;
      padding: 10px;
      margin: 5px 0;
      border-radius: 5px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    #todoList li.completed {
      text-decoration: line-through;
      opacity: 0.6;
    }
    
    /* 모달 스타일 */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    
    .modal.active {
      display: flex;
    }
    
    .modal-content {
      background: white;
      padding: 30px;
      border-radius: 15px;
      max-width: 500px;
      animation: slideDown 0.3s ease;
    }
    
    @keyframes slideDown {
      from { transform: translateY(-50px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    
    /* 프로그레스 바 */
    progress {
      width: 100%;
      height: 30px;
      border-radius: 15px;
      overflow: hidden;
    }
    
    /* SVG 스타일 */
    svg {
      width: 100%;
      height: 100px;
    }
    
    /* 드래그 앤 드롭 영역 */
    .drop-zone {
      border: 3px dashed #ccc;
      border-radius: 10px;
      padding: 30px;
      text-align: center;
      transition: all 0.3s;
    }
    
    .drop-zone.dragover {
      background: #f0f0ff;
      border-color: var(--primary);
    }
    
    /* 테이블 스타일 */
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 10px 0;
    }
    
    th, td {
      padding: 10px;
      text-align: left;
      border-bottom: 1px solid #e0e0e0;
    }
    
    th {
      background: var(--primary);
      color: white;
      font-weight: bold;
    }
    
    tr:hover {
      background: #f5f5f5;
    }
  </style>
</head>
<body>
  <div class="container">
    
    <!-- 1. DOM 조작 & 이벤트 처리 -->
    <div class="card">
      <h2>DOM 조작 & 이벤트</h2>
      <button id="changeText">텍스트 변경</button>
      <p id="demo">이 텍스트가 변경됩니다</p>
      <button id="addClass">스타일 추가/제거</button>
      <div class="filter-demo" id="filterBox"></div>
    </div>
    
    <!-- 2. 폼 처리 & 유효성 검사 -->
    <div class="card">
      <h2>폼 & 유효성 검사</h2>
      <form id="myForm">
        <input type="text" id="username" placeholder="이름 (필수)" required>
        <input type="email" id="email" placeholder="이메일 (필수)" required>
        <input type="number" id="age" placeholder="나이" min="1" max="120">
        <select id="country">
          <option value="">국가 선택</option>
          <option value="kr">한국</option>
          <option value="us">미국</option>
          <option value="jp">일본</option>
        </select>
        <button type="submit">제출</button>
      </form>
      <p id="formResult"></p>
    </div>
    
    <!-- 3. 로컬 스토리지 (메모리 저장) -->
    <div class="card">
      <h2>메모리 저장 (변수)</h2>
      <input type="text" id="saveInput" placeholder="저장할 텍스트">
      <button id="saveBtn">메모리에 저장</button>
      <button id="loadBtn">불러오기</button>
      <p id="savedData"></p>
    </div>
    
    <!-- 4. To-Do 리스트 -->
    <div class="card">
      <h2>To-Do 리스트</h2>
      <input type="text" id="todoInput" placeholder="할 일 입력">
      <button id="addTodo">추가</button>
      <ul id="todoList"></ul>
    </div>
    
    <!-- 5. 타이머 & Date 객체 -->
    <div class="card">
      <h2>타이머 & 시간</h2>
      <p id="currentTime"></p>
      <input type="number" id="countdown" value="10" min="1">
      <button id="startTimer">타이머 시작</button>
      <p id="timerDisplay"></p>
    </div>
    
    <!-- 6. Canvas 그리기 -->
    <div class="card">
      <h2>Canvas 그리기</h2>
      <canvas id="myCanvas"></canvas>
      <button id="clearCanvas">지우기</button>
      <button id="drawShapes">도형 그리기</button>
    </div>
    
    <!-- 7. 애니메이션 -->
    <div class="card">
      <h2>애니메이션</h2>
      <div style="width:50px;height:50px;background:var(--primary);border-radius:50%;margin:10px 0;" id="animBox"></div>
      <button id="animate">애니메이션 시작</button>
      <progress id="progress" value="0" max="100"></progress>
    </div>
    
    <!-- 8. API 요청 (Fetch) -->
    <div class="card">
      <h2>API 요청 (데이터 가져오기)</h2>
      <button id="fetchData">랜덤 조언 가져오기</button>
      <p id="apiResult"></p>
    </div>
    
    <!-- 9. 모달 & 팝업 -->
    <div class="card">
      <h2>모달 & 알림</h2>
      <button id="openModal">모달 열기</button>
      <button id="showAlert">Alert 표시</button>
      <button id="showConfirm">Confirm 표시</button>
    </div>
    
    <!-- 10. 드래그 앤 드롭 -->
    <div class="card">
      <h2>드래그 앤 드롭</h2>
      <div class="drop-zone" id="dropZone">
        여기에 파일을 드래그하세요
      </div>
      <p id="fileInfo"></p>
    </div>
    
    <!-- 11. 정규표현식 & 문자열 처리 -->
    <div class="card">
      <h2>정규표현식 & 텍스트</h2>
      <input type="text" id="regexInput" placeholder="전화번호 입력 (010-1234-5678)">
      <button id="validatePhone">전화번호 검증</button>
      <p id="regexResult"></p>
    </div>
    
    <!-- 12. 배열 & 객체 조작 -->
    <div class="card">
      <h2>데이터 처리</h2>
      <button id="arrayDemo">배열 메서드 실행</button>
      <div id="arrayResult"></div>
    </div>
    
    <!-- 13. 수학 연산 -->
    <div class="card">
      <h2>수학 연산</h2>
      <input type="number" id="num1" placeholder="숫자 1" value="5">
      <input type="number" id="num2" placeholder="숫자 2" value="3">
      <button id="calculate">계산</button>
      <p id="mathResult"></p>
    </div>
    
    <!-- 14. 조건문 & 반복문 -->
    <div class="card">
      <h2>조건문 & 반복문</h2>
      <input type="number" id="loopCount" value="5" min="1" max="10">
      <button id="runLoop">반복 실행</button>
      <div id="loopResult"></div>
    </div>
    
    <!-- 15. SVG 조작 -->
    <div class="card">
      <h2>SVG 그래픽</h2>
      <svg id="mySvg" viewBox="0 0 200 100">
        <circle id="svgCircle" cx="50" cy="50" r="30" fill="#667eea"/>
        <rect id="svgRect" x="120" y="20" width="60" height="60" fill="#764ba2"/>
      </svg>
      <button id="animateSvg">SVG 애니메이션</button>
    </div>
    
    <!-- 16. 이벤트 위임 & 동적 요소 -->
    <div class="card">
      <h2>동적 요소 생성</h2>
      <button id="addElement">요소 추가</button>
      <div id="dynamicContainer" style="margin-top:10px;"></div>
    </div>
    
    <!-- 17. 쿠키 & 세션 -->
    <div class="card">
      <h2>쿠키 설정</h2>
      <input type="text" id="cookieValue" placeholder="쿠키 값">
      <button id="setCookie">쿠키 설정</button>
      <button id="getCookie">쿠키 읽기</button>
      <p id="cookieResult"></p>
    </div>
    
    <!-- 18. 클립보드 -->
    <div class="card">
      <h2>클립보드 복사</h2>
      <input type="text" id="copyText" value="이 텍스트를 복사하세요">
      <button id="copyBtn">복사</button>
      <p id="copyResult"></p>
    </div>
    
    <!-- 19. Geolocation -->
    <div class="card">
      <h2>위치 정보</h2>
      <button id="getLocation">내 위치 가져오기</button>
      <p id="locationResult"></p>
    </div>
    
    <!-- 20. Web Storage & 데이터 테이블 -->
    <div class="card">
      <h2>데이터 테이블</h2>
      <table id="dataTable">
        <thead>
          <tr>
            <th>이름</th>
            <th>나이</th>
            <th>도시</th>
          </tr>
        </thead>
        <tbody id="tableBody"></tbody>
      </table>
      <button id="addRow">행 추가</button>
    </div>
    
  </div>
  
  <!-- 모달 HTML -->
  <div class="modal" id="myModal">
    <div class="modal-content">
      <h2>모달 창</h2>
      <p>이것은 모달 창입니다!</p>
      <button id="closeModal">닫기</button>
    </div>
  </div>

  <script>
    // JavaScript 시작
    
    // 1. DOM 선택 & 이벤트 리스너
    document.getElementById('changeText').addEventListener('click', function() {
      const p = document.getElementById('demo');
      p.textContent = '텍스트가 변경되었습니다! 시간: ' + new Date().toLocaleTimeString();
      p.style.color = '#667eea';
    });
    
    // 2. 클래스 토글
    document.getElementById('addClass').addEventListener('click', () => {
      document.getElementById('filterBox').classList.toggle('filter-demo');
    });
    
    // 3. 폼 제출 & 유효성 검사
    document.getElementById('myForm').addEventListener('submit', function(e) {
      e.preventDefault(); // 기본 제출 동작 방지
      
      const username = document.getElementById('username').value;
      const email = document.getElementById('email').value;
      const age = document.getElementById('age').value;
      
      // 조건문
      if (username && email) {
        document.getElementById('formResult').innerHTML = 
          `<strong>제출 완료!</strong><br>이름: ${username}<br>이메일: ${email}<br>나이: ${age || '미입력'}`;
      }
    });
    
    // 4. 변수에 저장 (로컬 스토리지 대신 메모리 사용)
    let savedText = '';
    
    document.getElementById('saveBtn').addEventListener('click', () => {
      savedText = document.getElementById('saveInput').value;
      alert('메모리에 저장되었습니다!');
    });
    
    document.getElementById('loadBtn').addEventListener('click', () => {
      document.getElementById('savedData').textContent = '저장된 데이터: ' + (savedText || '없음');
    });
    
    // 5. To-Do 리스트 (배열 사용)
    const todos = [];
    
    document.getElementById('addTodo').addEventListener('click', () => {
      const input = document.getElementById('todoInput');
      const text = input.value.trim();
      
      if (text) {
        todos.push({ text, completed: false });
        renderTodos();
        input.value = '';
      }
    });
    
    function renderTodos() {
      const list = document.getElementById('todoList');
      list.innerHTML = '';
      
      // 반복문 (forEach)
      todos.forEach((todo, index) => {
        const li = document.createElement('li');
        li.className = todo.completed ? 'completed' : '';
        li.innerHTML = `
          <span>${todo.text}</span>
          <button onclick="toggleTodo(${index})">완료</button>
          <button onclick="deleteTodo(${index})">삭제</button>
        `;
        list.appendChild(li);
      });
    }
    
    function toggleTodo(index) {
      todos[index].completed = !todos[index].completed;
      renderTodos();
    }
    
    function deleteTodo(index) {
      todos.splice(index, 1);
      renderTodos();
    }
    
    // 6. 타이머 & Date 객체
    setInterval(() => {
      document.getElementById('currentTime').textContent = 
        '현재 시간: ' + new Date().toLocaleString('ko-KR');
    }, 1000);
    
    document.getElementById('startTimer').addEventListener('click', () => {
      let count = parseInt(document.getElementById('countdown').value);
      const display = document.getElementById('timerDisplay');
      
      const timer = setInterval(() => {
        display.textContent = `남은 시간: ${count}초`;
        count--;
        
        if (count < 0) {
          clearInterval(timer);
          display.textContent = '타이머 종료!';
        }
      }, 1000);
    });
    
    // 7. Canvas 그리기
    const canvas = document.getElementById('myCanvas');
    const ctx = canvas.getContext('2d');
    canvas.width = canvas.offsetWidth;
    canvas.height = 200;
    
    let isDrawing = false;
    
    canvas.addEventListener('mousedown', () => isDrawing = true);
    canvas.addEventListener('mouseup', () => isDrawing = false);
    canvas.addEventListener('mousemove', (e) => {
      if (!isDrawing) return;
      
      const rect = canvas.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;
      
      ctx.fillStyle = '#667eea';
      ctx.fillRect(x, y, 5, 5);
    });
    
    document.getElementById('clearCanvas').addEventListener('click', () => {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
    });
    
    document.getElementById('drawShapes').addEventListener('click', () => {
      // 원 그리기
      ctx.beginPath();
      ctx.arc(100, 100, 50, 0, Math.PI * 2);
      ctx.fillStyle = '#764ba2';
      ctx.fill();
      
      // 사각형 그리기
      ctx.fillStyle = '#667eea';
      ctx.fillRect(200, 50, 100, 100);
      
      // 선 그리기
      ctx.beginPath();
      ctx.moveTo(350, 50);
      ctx.lineTo(450, 150);
      ctx.strokeStyle = '#ff6b6b';
      ctx.lineWidth = 5;
      ctx.stroke();
    });
    
    // 8. 애니메이션 (requestAnimationFrame)
    document.getElementById('animate').addEventListener('click', () => {
      const box = document.getElementById('animBox');
      const progress = document.getElementById('progress');
      let pos = 0;
      let progressVal = 0;
      
      function animate() {
        if (pos < 300) {
          pos += 2;
          progressVal += 0.66;
          box.style.transform = `translateX(${pos}px)`;
          progress.value = progressVal;
          requestAnimationFrame(animate);
        }
      }
      animate();
    });
    
    // 9. Fetch API (비동기 통신)
    document.getElementById('fetchData').addEventListener('click', async () => {
      const result = document.getElementById('apiResult');
      result.textContent = '로딩 중...';
      
      try {
        const response = await fetch('https://api.adviceslip.com/advice');
        const data = await response.json();
        result.textContent = '조언: ' + data.slip.advice;
      } catch (error) {
        result.textContent = '오류: ' + error.message;
      }
    });
    
    // 10. 모달
    document.getElementById('openModal').addEventListener('click', () => {
      document.getElementById('myModal').classList.add('active');
    });
    
    document.getElementById('closeModal').addEventListener('click', () => {
      document.getElementById('myModal').classList.remove('active');
    });
    
    document.getElementById('showAlert').addEventListener('click', () => {
      alert('이것은 Alert 창입니다!');
    });
    
    document.getElementById('showConfirm').addEventListener('click', () => {
      if (confirm('확인하시겠습니까?')) {
        alert('확인을 눌렀습니다!');
      }
    });
    
    // 11. 드래그 앤 드롭
    const dropZone = document.getElementById('dropZone');
    
    dropZone.addEventListener('dragover', (e) => {
      e.preventDefault();
      dropZone.classList.add('dragover');
    });
    
    dropZone.addEventListener('dragleave', () => {
      dropZone.classList.remove('dragover');
    });
    
    dropZone.addEventListener('drop', (e) => {
      e.preventDefault();
      dropZone.classList.remove('dragover');
      
      const files = e.dataTransfer.files;
      if (files.length > 0) {
        const file = files[0];
        document.getElementById('fileInfo').textContent = 
          `파일명: ${file.name}, 크기: ${(file.size / 1024).toFixed(2)}KB, 타입: ${file.type}`;
      }
    });
    
    // 12. 정규표현식
    document.getElementById('validatePhone').addEventListener('click', () => {
      const input = document.getElementById('regexInput').value;
      const phoneRegex = /^010-\d{4}-\d{4}$/;
      const result = document.getElementById('regexResult');
      
      if (phoneRegex.test(input)) {
        result.textContent = '✅ 올바른 전화번호 형식입니다!';
        result.style.color = 'green';
      } else {
        result.textContent = '❌ 010-1234-5678 형식으로 입력하세요';
        result.style.color = 'red';
      }
    });
    
    // 13. 배열 메서드
    document.getElementById('arrayDemo').addEventListener('click', () => {
      const numbers = [1, 2, 3, 4, 5];
      const result = document.getElementById('arrayResult');
      
      // map, filter, reduce
      const doubled = numbers.map(n => n * 2);
      const filtered = numbers.filter(n => n > 2);
      const sum = numbers.reduce((acc, n) => acc + n, 0);
      
      result.innerHTML = `
        원본: [${numbers}]<br>
        map (x2): [${doubled}]<br>
        filter (>2): [${filtered}]<br>
        reduce (합계): ${sum}
      `;
    });
    
    // 14. 수학 연산
    document.getElementById('calculate').addEventListener('click', () => {
      const num1 = parseFloat(document.getElementById('num1').value);
      const num2 = parseFloat(document.getElementById('num2').value);
      const result = document.getElementById('mathResult');
      
      result.innerHTML = `
        덧셈: ${num1 + num2}<br>
        뺄셈: ${num1 - num2}<br>
        곱셈: ${num1 * num2}<br>
        나눗셈: ${(num1 / num2).toFixed(2)}<br>
        제곱: ${Math.pow(num1, num2)}<br>
        루트: ${Math.sqrt(num1).toFixed(2)}
      `;
    });
    
    // 15. 반복문
    document.getElementById('runLoop').addEventListener('click', () => {
      const count = parseInt(document.getElementById('loopCount').value);
      const result = document.getElementById('loopResult');
      let output = '';
      
      // for 반복문
      for (let i = 1; i <= count; i++) {
        output += `<div class="flex-item">항목 ${i}</div>`;
      }
      
      result.innerHTML = '<div class="flex-demo">' + output + '</div>';
    });
    
    // 16. SVG 애니메이션
    document.getElementById('animateSvg').addEventListener('click', () => {
      const circle = document.getElementById('svgCircle');
      const rect = document.getElementById('svgRect');
      
      let angle = 0;
      const animate = setInterval(() => {
        angle += 5;
        circle.setAttribute('cx', 50 + Math.cos(angle * Math.PI / 180) * 30);
        circle.setAttribute('cy', 50 + Math.sin(angle * Math.PI / 180) * 30);
        rect.setAttribute('transform', `rotate(${angle} 150 50)`);
        
        if (angle >= 360) clearInterval(animate);
      }, 20);
    });
    
    // 17. 동적 요소 생성
    let elementCount = 0;
    document.getElementById('addElement').addEventListener('click', () => {
      const container = document.getElementById('dynamicContainer');
      const newElement = document.createElement('div');
      newElement.className = 'flex-item';
      newElement.textContent = `동적 요소 ${++elementCount}`;
      newElement.onclick = function() {
        this.remove(); // 이벤트 위임
      };
      container.appendChild(newElement);
    });
    
    // 18. 쿠키 (간단한 문자열 저장)
    let cookieData = '';
    
    document.getElementById('setCookie').addEventListener('click', () => {
      cookieData = document.getElementById('cookieValue').value;
      alert('쿠키가 설정되었습니다!');
    });
    
    document.getElementById('getCookie').addEventListener('click', () => {
      document.getElementById('cookieResult').textContent = 
        '쿠키 값: ' + (cookieData || '없음');
    });
    
    // 19. 클립보드 복사
    document.getElementById('copyBtn').addEventListener('click', async () => {
      const text = document.getElementById('copyText').value;
      try {
        await navigator.clipboard.writeText(text);